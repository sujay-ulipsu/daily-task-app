<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Daily Work Report</title>

<style>
:root{
  --bg:#121212;
  --card:#1e1e1e;
  --text:#ffffff;
  --border:#333;
  --btn:#1e88e5;
}
body.light{
  --bg:#f4f6f8;
  --card:#ffffff;
  --text:#000000;
  --border:#ccc;
  --btn:#1e88e5;
}
body{
  margin:0;
  font-family:Arial,sans-serif;
  background:var(--bg);
  color:var(--text);
}
.container{
  max-width:900px;
  margin:auto;
  padding:20px;
}
.header{
  display:flex;
  align-items:center;
  gap:14px;
  margin-bottom:10px;
}
.header img{ height:48px; }
.header h1{ flex:1; text-align:center; margin:0; }

.top-row{
  display:flex;
  justify-content:space-between;
  align-items:center;
  margin:10px 0 20px;
}
.toggle{ cursor:pointer; font-size:14px; }

.card{
  background:var(--card);
  padding:16px;
  border-radius:12px;
  margin-bottom:16px;
}
label{ font-weight:bold; display:block; margin-bottom:6px; }
textarea{
  width:100%;
  min-height:90px;
  padding:12px;
  font-size:16px;
  border-radius:8px;
  border:1px solid var(--border);
  background:transparent;
  color:var(--text);
  resize:vertical;
}
.btn{
  width:100%;
  padding:14px;
  font-size:18px;
  background:var(--btn);
  color:#fff;
  border:none;
  border-radius:10px;
  cursor:pointer;
  margin-top:10px;
}
input{ padding:6px; font-size:14px; }
.hidden{ display:none; }
</style>
</head>

<body>
<div class="container">

<div class="header">
  <img src="logo.png" alt="Kidvento Logo">
  <h1>Daily Work Report</h1>
</div>

<div class="top-row">
  <div>
    Date:
    <input type="text" id="dateDisplay" readonly onclick="openCalendar()">
    <input type="date" id="datePicker" class="hidden">
  </div>
  <div class="toggle" onclick="toggleTheme()">üåô Toggle Theme</div>
</div>

<div class="card"><label>Task 1: Tender Master Sheet ‚Äì Daily Update</label><textarea id="t1"></textarea></div>
<div class="card"><label>Task 2: Internal Team (Logistics & Training Team)</label><textarea id="t2"></textarea></div>
<div class="card"><label>Task 3: DDPI ‚Äì Follow-ups</label><textarea id="t3"></textarea></div>
<div class="card"><label>Other Tasks Completed</label><textarea id="t4"></textarea></div>
<div class="card"><label>Pending Tasks</label><textarea id="t5"></textarea></div>
<div class="card"><label>Plan for Next Working Day</label><textarea id="t6"></textarea></div>

<button class="btn" onclick="generatePDF()">Generate PDF</button>
<button class="btn" onclick="copyToWhatsApp()">Copy to WhatsApp</button>

</div>

<script>
const fields=["t1","t2","t3","t4","t5","t6"];

if(!localStorage.getItem("theme")) localStorage.setItem("theme","dark");
document.body.className=localStorage.getItem("theme");
function toggleTheme(){
  const t=document.body.className==="dark"?"light":"dark";
  document.body.className=t;
  localStorage.setItem("theme",t);
}

function toISO(d){ return d.toISOString().split("T")[0]; }
function toDDMMYYYY(d){
  return String(d.getDate()).padStart(2,"0")+"-"+String(d.getMonth()+1).padStart(2,"0")+"-"+d.getFullYear();
}

const datePicker=document.getElementById("datePicker");
const dateDisplay=document.getElementById("dateDisplay");

const today=new Date();
datePicker.value=toISO(today);
dateDisplay.value=toDDMMYYYY(today);
loadData(datePicker.value);

function openCalendar(){ datePicker.showPicker(); }

datePicker.addEventListener("change",()=>{
  const d=new Date(datePicker.value);
  dateDisplay.value=toDDMMYYYY(d);
  loadData(datePicker.value);
});

function storageKey(){
  return "dailyReport-"+datePicker.value;
}

function loadData(){
  const data=JSON.parse(localStorage.getItem(storageKey()))||{};
  fields.forEach((id,i)=>{
    document.getElementById(id).value=data["task"+(i+1)]||"";
  });
}

fields.forEach((id,i)=>{
  document.getElementById(id).addEventListener("input",()=>{
    const data=JSON.parse(localStorage.getItem(storageKey()))||{};
    data["task"+(i+1)]=document.getElementById(id).value;
    localStorage.setItem(storageKey(),JSON.stringify(data));
  });
});

function generatePDF(){
  localStorage.setItem("currentReportDate",datePicker.value);
  window.open("report.html","_blank");
}

function copyToWhatsApp(){
  const dateText = dateDisplay.value;

  const titles = [
    "Tender Master Sheet - Daily Update",
    "Internal Team (Logistics & Training Team)",
    "DDPI - Follow-ups",
    "Other Tasks Completed",
    "Pending Tasks",
    "Plan for Next Working Day"
  ];

  let message = `Dear Kiran,\n\nToday Update - ${dateText}\n\n`;

  titles.forEach((title, i) => {
    const value = document.getElementById("t"+(i+1)).value.trim() || "-";
    message += `${i+1}. ${title}\n${value}\n\n`;
  });

  message += `Regards\nSujay B V\nManager ‚Äì Educational Institutions & Operations\nKidvento Education and Research Pvt. Ltd.`;

  navigator.clipboard.writeText(message).then(()=>{
    alert("Copied successfully. Paste directly in WhatsApp üëç");
  });
}
</script>

</body>
</html>